<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Wed Apr 28 00:41:02 MDT 2021 -->
<title>Db (SkipLedger 0.0.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-04-28">
<meta name="description" content="declaration: package: io.crums.sldg.db, class: Db">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":42,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Db.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.crums.sldg.db</a></div>
<h1 title="Class Db" class="title">Class Db</h1>
</div>
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">io.crums.sldg.db.Db</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Closeable</code>, <code>java.lang.AutoCloseable</code></dd>
</dl>
<hr>
<pre>public class <span class="type-name-label">Db</span>
extends java.lang.Object
implements java.io.Closeable</pre>
<div class="block">A directory containing a <a href="../Ledger.html" title="class in io.crums.sldg">skip ledger</a>, a crumtrail repo
 (establishing how old) and a table identifying which rows contain beacon hashes (establishing
 how young).</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested.class.summary">
<h2>Nested Class Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Nested Classes</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Class</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static class&nbsp;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="Db.WitnessRecord.html" title="class in io.crums.sldg.db">Db.WitnessRecord</a></span></code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static class&nbsp;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></span></code></th>
<td class="col-last">
<div class="block">Summary of a ledger <a href="#witness()">witness</a> action.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#BEACON_TBL">BEACON_TBL</a></span></code></th>
<td class="col-last">
<div class="block">Fixed width index table filename.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(java.io.File,io.crums.io.Opening)">Db</a></span>&#8203;(java.io.File&nbsp;dir,
io.crums.io.Opening&nbsp;mode)</code></th>
<td class="col-last">
<div class="block">Creates a lazy-loading instance.</div>
</td>
</tr>
<tr class="row-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(java.io.File,io.crums.io.Opening,boolean)">Db</a></span>&#8203;(java.io.File&nbsp;dir,
io.crums.io.Opening&nbsp;mode,
boolean&nbsp;lazy)</code></th>
<td class="col-last">
<div class="block">Full param constructor.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t6" class="table-tab" onclick="show(32);">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#addBeacon()">addBeacon</a></span>()</code></th>
<td class="col-last">
<div class="block">Gets the beacon (the latest published TreeRef at crums.io),
 adds its hash as the next entry in the ledger and returns its row number.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code><a href="../Path.html" title="class in io.crums.sldg">Path</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#beaconedPath(long,long)">beaconedPath</a></span>&#8203;(long&nbsp;lo,
long&nbsp;hi)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code><a href="../Path.html" title="class in io.crums.sldg">Path</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#beaconedStatePath()">beaconedStatePath</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#close()">close</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getBeaconCount()">getBeaconCount</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getBeaconRowNumbers()">getBeaconRowNumbers</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getBeaconUtcs()">getBeaconUtcs</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>io.crums.model.CrumTrail</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getCrumTrailByIndex(int)">getCrumTrailByIndex</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="col-last">
<div class="block">Returns a crumtrail by index.</div>
</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code>io.crums.model.CrumTrail</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getCrumTrailByRowNumber(long)">getCrumTrailByRowNumber</a></span>&#8203;(long&nbsp;rowNumber)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i9">
<td class="col-first"><code>java.io.File</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getDir()">getDir</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i10">
<td class="col-first"><code><a href="../Ledger.html" title="class in io.crums.sldg">Ledger</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getLedger()">getLedger</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i11">
<td class="col-first"><code>java.util.Optional&lt;<a href="../scraps/Nugget.html" title="class in io.crums.sldg.scraps">Nugget</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getNugget(long)">getNugget</a></span>&#8203;(long&nbsp;rowNumber)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i12">
<td class="col-first"><code>java.util.Optional&lt;<a href="../scraps/Nugget.html" title="class in io.crums.sldg.scraps">Nugget</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getNugget(long,boolean)">getNugget</a></span>&#8203;(long&nbsp;rowNumber,
boolean&nbsp;withBeaconDate)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i13">
<td class="col-first"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getRowNumbersWitnessed()">getRowNumbersWitnessed</a></span>()</code></th>
<td class="col-last">
<div class="block">Synonym for <a href="#getTrailedRowNumbers()">getTrailedRowNumbers()</a>.</div>
</td>
</tr>
<tr class="alt-color" id="i14">
<td class="col-first"><code>java.util.Optional&lt;<a href="../scraps/TrailedPath.html" title="class in io.crums.sldg.scraps">TrailedPath</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getTrail(long)">getTrail</a></span>&#8203;(long&nbsp;rowNumber)</code></th>
<td class="col-last">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">dropping this design (and nomenclature)</div>
</div>
</td>
</tr>
<tr class="row-color" id="i15">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getTrailedRowCount()">getTrailedRowCount</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the number of rows that have crumtrails.</div>
</td>
</tr>
<tr class="alt-color" id="i16">
<td class="col-first"><code>java.util.List&lt;java.lang.Long&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getTrailedRowNumbers()">getTrailedRowNumbers</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the row numbers that have CrumTrails.</div>
</td>
</tr>
<tr class="row-color" id="i17">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isBeaconRow(long)">isBeaconRow</a></span>&#8203;(long&nbsp;rowNumber)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i18">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isTrailedRow(long)">isTrailedRow</a></span>&#8203;(long&nbsp;rowNumber)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i19">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#lastSansBeaconRowWitnessed()">lastSansBeaconRowWitnessed</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the last sans-beacon row (number) witnessed directly, or indirectly
 by a witnessed beacon row immediately above (next number) it.</div>
</td>
</tr>
<tr class="alt-color" id="i20">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#lastWitnessNum()">lastWitnessNum</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the last row number witnessed, if any; 0 (zero) otherwise.</div>
</td>
</tr>
<tr class="row-color" id="i21">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#rowNumSansBeacons(long)">rowNumSansBeacons</a></span>&#8203;(long&nbsp;rowNum)</code></th>
<td class="col-last">
<div class="block">Translates and returns the given row number as a <em>sans-beacon</em> row
 number.</div>
</td>
</tr>
<tr class="alt-color" id="i22">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#rowNumWithBeacons(long)">rowNumWithBeacons</a></span>&#8203;(long&nbsp;rowNum)</code></th>
<td class="col-last">
<div class="block">Translates and returns the given sans-beacon row number as a row number that
 includes the preceding beacon rows.</div>
</td>
</tr>
<tr class="row-color" id="i23">
<td class="col-first"><code>long</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#size()">size</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the number of rows in the ledger.</div>
</td>
</tr>
<tr class="alt-color" id="i24">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#sizeSansBeacons()">sizeSansBeacons</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i25">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#truncate(long)">truncate</a></span>&#8203;(long&nbsp;newSize)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i26">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#unwitnessedRowCount()">unwitnessedRowCount</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the number of unwitnessed rows.</div>
</td>
</tr>
<tr class="row-color" id="i27">
<td class="col-first"><code><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#witness()">witness</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i28">
<td class="col-first"><code><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#witness(boolean)">witness</a></span>&#8203;(boolean&nbsp;includeLast)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i29">
<td class="col-first"><code><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#witness(int,boolean)">witness</a></span>&#8203;(int&nbsp;exponent,
boolean&nbsp;includeLast)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="BEACON_TBL">
<h3>BEACON_TBL</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name">BEACON_TBL</span></div>
<div class="block">Fixed width index table filename.
 (Created under <a href="#getDir()">dir</a>.)</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#io.crums.sldg.db.Db.BEACON_TBL">Constant Field Values</a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.io.File,io.crums.io.Opening)">
<h3>Db</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">Db</span>&#8203;(<span class="parameters">java.io.File&nbsp;dir,
io.crums.io.Opening&nbsp;mode)</span>
   throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Creates a lazy-loading instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dir</code> - root directory</dd>
<dd><code>mode</code> - opening mode (non-null)</dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.io.File,io.crums.io.Opening,boolean)">
<h3>Db</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">Db</span>&#8203;(<span class="parameters">java.io.File&nbsp;dir,
io.crums.io.Opening&nbsp;mode,
boolean&nbsp;lazy)</span>
   throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">Full param constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dir</code> - root directory</dd>
<dd><code>mode</code> - opening mode (non-null)</dd>
<dd><code>lazy</code> - if <tt>true</tt>, then the ledger rows are loaded lazily</dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">close</span>()</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt>Specified by:</dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getDir()">
<h3>getDir</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.io.File</span>&nbsp;<span class="member-name">getDir</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getLedger()">
<h3>getLedger</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../Ledger.html" title="class in io.crums.sldg">Ledger</a></span>&nbsp;<span class="member-name">getLedger</span>()</div>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">size</span>()</div>
<div class="block">Returns the number of rows in the ledger.</div>
</section>
</li>
<li>
<section class="detail" id="truncate(long)">
<h3>truncate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">truncate</span>&#8203;(<span class="parameters">long&nbsp;newSize)</span></div>
</section>
</li>
<li>
<section class="detail" id="beaconedPath(long,long)">
<h3>beaconedPath</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../Path.html" title="class in io.crums.sldg">Path</a></span>&nbsp;<span class="member-name">beaconedPath</span>&#8203;(<span class="parameters">long&nbsp;lo,
long&nbsp;hi)</span></div>
</section>
</li>
<li>
<section class="detail" id="beaconedStatePath()">
<h3>beaconedStatePath</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../Path.html" title="class in io.crums.sldg">Path</a></span>&nbsp;<span class="member-name">beaconedStatePath</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNugget(long)">
<h3>getNugget</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.Optional&lt;<a href="../scraps/Nugget.html" title="class in io.crums.sldg.scraps">Nugget</a>&gt;</span>&nbsp;<span class="member-name">getNugget</span>&#8203;(<span class="parameters">long&nbsp;rowNumber)</span></div>
</section>
</li>
<li>
<section class="detail" id="getNugget(long,boolean)">
<h3>getNugget</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.Optional&lt;<a href="../scraps/Nugget.html" title="class in io.crums.sldg.scraps">Nugget</a>&gt;</span>&nbsp;<span class="member-name">getNugget</span>&#8203;(<span class="parameters">long&nbsp;rowNumber,
boolean&nbsp;withBeaconDate)</span></div>
</section>
</li>
<li>
<section class="detail" id="getTrail(long)">
<h3>getTrail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.Optional&lt;<a href="../scraps/TrailedPath.html" title="class in io.crums.sldg.scraps">TrailedPath</a>&gt;</span>&nbsp;<span class="member-name">getTrail</span>&#8203;(<span class="parameters">long&nbsp;rowNumber)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">dropping this design (and nomenclature)</div>
</div>
<div class="block">Returns a <tt>TrailedPath</tt> to the given row number, if there is yet
 evidence (a CrumTrail) that it has been witnessed . (There
 is no evidence that a row number has been witnessed until either that row
 or a subsequent row is witnessed.)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rowNumber</code> - &ge; 1 and &lte; <a href="#size()">size()</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCrumTrailByIndex(int)">
<h3>getCrumTrailByIndex</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">io.crums.model.CrumTrail</span>&nbsp;<span class="member-name">getCrumTrailByIndex</span>&#8203;(<span class="parameters">int&nbsp;index)</span>
                                             throws <span class="exceptions">java.lang.IllegalArgumentException</span></div>
<div class="block">Returns a crumtrail by index.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>index</code> - &ge; 0 and &lt; <a href="#getTrailedRowNumbers()">getTrailedRowNumbers()</a>.size()</dd>
<dt>Throws:</dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCrumTrailByRowNumber(long)">
<h3>getCrumTrailByRowNumber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">io.crums.model.CrumTrail</span>&nbsp;<span class="member-name">getCrumTrailByRowNumber</span>&#8203;(<span class="parameters">long&nbsp;rowNumber)</span>
                                                 throws <span class="exceptions">java.lang.IllegalArgumentException</span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code>java.lang.IllegalArgumentException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRowNumbersWitnessed()">
<h3>getRowNumbersWitnessed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.List&lt;java.lang.Long&gt;</span>&nbsp;<span class="member-name">getRowNumbersWitnessed</span>()</div>
<div class="block">Synonym for <a href="#getTrailedRowNumbers()">getTrailedRowNumbers()</a>.</div>
</section>
</li>
<li>
<section class="detail" id="getTrailedRowNumbers()">
<h3>getTrailedRowNumbers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.List&lt;java.lang.Long&gt;</span>&nbsp;<span class="member-name">getTrailedRowNumbers</span>()</div>
<div class="block">Returns the row numbers that have CrumTrails. I.e.
 the rows that have been witnessed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>strictly ascending list of row numbers, possibly empty</dd>
<dt>See Also:</dt>
<dd><a href="#getCrumTrailByIndex(int)"><code>getCrumTrailByIndex(int)</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTrailedRowCount()">
<h3>getTrailedRowCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">getTrailedRowCount</span>()</div>
<div class="block">Returns the number of rows that have crumtrails.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>getTrailedRowNumbers().size()</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTrailedRow(long)">
<h3>isTrailedRow</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">isTrailedRow</span>&#8203;(<span class="parameters">long&nbsp;rowNumber)</span></div>
</section>
</li>
<li>
<section class="detail" id="lastSansBeaconRowWitnessed()">
<h3>lastSansBeaconRowWitnessed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">lastSansBeaconRowWitnessed</span>()</div>
<div class="block">Returns the last sans-beacon row (number) witnessed directly, or indirectly
 by a witnessed beacon row immediately above (next number) it.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><em>sans-beacon</em> row number of the last row witnessed, if any;
        0 (zero) otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unwitnessedRowCount()">
<h3>unwitnessedRowCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">unwitnessedRowCount</span>()</div>
<div class="block">Returns the number of unwitnessed rows.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>size() - lastWitnessNum()</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="lastWitnessNum()">
<h3>lastWitnessNum</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">lastWitnessNum</span>()</div>
<div class="block">Returns the last row number witnessed, if any; 0 (zero) otherwise.</div>
</section>
</li>
<li>
<section class="detail" id="witness()">
<h3>witness</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></span>&nbsp;<span class="member-name">witness</span>()</div>
</section>
</li>
<li>
<section class="detail" id="witness(boolean)">
<h3>witness</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></span>&nbsp;<span class="member-name">witness</span>&#8203;(<span class="parameters">boolean&nbsp;includeLast)</span></div>
</section>
</li>
<li>
<section class="detail" id="witness(int,boolean)">
<h3>witness</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="Db.WitnessReport.html" title="class in io.crums.sldg.db">Db.WitnessReport</a></span>&nbsp;<span class="member-name">witness</span>&#8203;(<span class="parameters">int&nbsp;exponent,
boolean&nbsp;includeLast)</span></div>
</section>
</li>
<li>
<section class="detail" id="addBeacon()">
<h3>addBeacon</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">addBeacon</span>()</div>
<div class="block">Gets the beacon (the latest published TreeRef at crums.io),
 adds its hash as the next entry in the ledger and returns its row number.
 The beacon's maxUtc and ledger row number are
 maintained are in a separate table for fast lookup.</div>
</section>
</li>
<li>
<section class="detail" id="getBeaconCount()">
<h3>getBeaconCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">getBeaconCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="sizeSansBeacons()">
<h3>sizeSansBeacons</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name">sizeSansBeacons</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getBeaconUtcs()">
<h3>getBeaconUtcs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.List&lt;java.lang.Long&gt;</span>&nbsp;<span class="member-name">getBeaconUtcs</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getBeaconRowNumbers()">
<h3>getBeaconRowNumbers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.util.List&lt;java.lang.Long&gt;</span>&nbsp;<span class="member-name">getBeaconRowNumbers</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isBeaconRow(long)">
<h3>isBeaconRow</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name">isBeaconRow</span>&#8203;(<span class="parameters">long&nbsp;rowNumber)</span></div>
</section>
</li>
<li>
<section class="detail" id="rowNumWithBeacons(long)">
<h3>rowNumWithBeacons</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">rowNumWithBeacons</span>&#8203;(<span class="parameters">long&nbsp;rowNum)</span></div>
<div class="block">Translates and returns the given sans-beacon row number as a row number that
 includes the preceding beacon rows.
 <h3>Purpose</h3>
 <p>
 From a user-perspective, it may be desirable to orthogonalize the bookkeeping of
 ledger contents from that of timekeeping. Beacon rows serve no purpose other than
 to establish a <em>maximum bound on the age of rows</em> in a ledger.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rowNum</code> - non-negative, <em>sans-beacon</em> row number</dd>
<dt>Returns:</dt>
<dd>the row number, after accounting for the preceding beacon rows</dd>
<dt>Throws:</dt>
<dd><code>java.lang.IllegalArgumentException</code> - if <code>rowNum</code> &lt; 0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rowNumSansBeacons(long)">
<h3>rowNumSansBeacons</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="member-name">rowNumSansBeacons</span>&#8203;(<span class="parameters">long&nbsp;rowNum)</span></div>
<div class="block">Translates and returns the given row number as a <em>sans-beacon</em> row
 number. This is what the row number would be, if the ledger contained no
 preceding beacon rows.
 <p>
 If the argument is itself a beacon row, then the return value is
 the same as the value returned for highest non-beacon row number that is
 less than the argument. That's a mouthful, but it means it falls thru.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rowNum</code> - a regular row number</dd>
<dt>Returns:</dt>
<dd>the row number, as if the ledger had no beacons</dd>
<dt>See Also:</dt>
<dd><a href="#rowNumWithBeacons(long)"><code>rowNumWithBeacons(long)</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Db.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright &#169; 2021. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
