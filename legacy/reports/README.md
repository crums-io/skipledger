Reports
=======

The `reports` module enables a ledger owner to embed a report template in the
morsel (`.mrsl`) files they generate and distribute. The embedded template can, in turn,
be used by the *mrsl* tool to generate a PDF report depending on the contents
of the `.mrsl` file it accompanies.

The template's DSL is in JSON. I've tried to keep it as simple as possible.
The goal is to provide sufficient customizability to allow a ledger owner package such things
as bills and receipts in the morsels they generate and distribute.

Without getting into specifics, here's an overview about how a report template is
organized.

## Presentation

Presently, the PDF document is principally organized as a main table, an optional
header table, and an optional footer. Each table declares how many columns it has.
Each column may supply default attributes for how cell values in that table are to be presented.
Each table also declares if it has a border and inner grid lines, and if so what they look like.

Table cells can present hard-coded values, or dynamic values from source rows in the `.mrsl`.
A table cell's value can be set by its coordinates (column, row): unfilled cells are
treated as blank. A table cell may also be an image (a logo, for example, or again, from
`.mrsl` row data itself).

A table column may also define how cell values under it are populated and derived from rows in the `.mrsl`. That is, a table column may *auto-populate* itself (with reasonable rules for when it
should start doing so). When one of a table's columns auto-populates, it is also possible
to specify final *completion table rows* by setting a cell value at *negative row number*
coordinate: that is, -2 means 2 rows *after* the last auto-populated row.

## Query Parameters

The template DSL is meant to be suitable for generating *many* (likely independent) reports from data in the same `.mrsl`. Recall, morsel files from the same ledger can be merged; their
data aggregates. A template so designed takes one or more parameters in order to narrow down
which rows in the `.mrsl` to generate a report from. These parameters are expressed as query arguments for
report generation. The *mrsl* tool allows the user to discover what these arguments are.

## Design Workflow

There are probably 2 parts to the design of a report template. One, the logical organization; two,
the presentation dress up. Parts of the template's JSON are not designed to be edited by hand;
other presentation-related parts are.

Specifically, the JSON DSL allows the definition of certain parts such as colors, fonts, styles
to be centralized in a dictionary so that entities may be referenced instead of spelling out
their value explicitly. Once populated, the dictionary part should be editable by a graphic-design
type.

Presently, a developer must first design and generate a skeletal template that works (but is not necessarily
pretty) using *Java*; the second task is to then make the skeletal template more presentable
(logo, line-spacing, etc.). Tools to make this easier are under development. (A dictionary maker that de-duplicates repeated entities in a template, for example, is already developed.)

The skeletal JSON generated by the developer, btw, is well ordered (that is, the order of JSON fields
is not jumbled). Excepting lists, order doesn't matter in JSON, of course: the reason why the generated JSON is
always in a predictable order is so that, over time, a human reader becomes familiar with how the JSON DSL is
organized.
